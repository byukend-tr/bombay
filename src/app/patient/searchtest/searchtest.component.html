<div class="container-fluid">
  <div style="color:#365082">
    <h2>ผลการทดลอง</h2>
  </div>

  <form (ngSubmit)="search(condition)" [formGroup]="conditionForm" #condition="ngForm">
    <div class="row">
      <div class="col">
        รหัสบัตรประชาชน
        <input type="text" class="form-control form-control-sm" placeholder="รหัสบัตรประชาชน 1-13 หลัก" formControlName="id">
        <div class="row">
          <div class="col">
            ชื่อจริง&nbsp;
            <input type="text" class="form-control form-control-sm" placeholder="ชื่อจริง">
          </div>
          <div class="col">
            นามสกุล&nbsp;
            <input type="text" class="form-control form-control-sm" placeholder="นามสกุล">
          </div>
        </div>

        อยู่ในระหว่างการทำผลการทดลองต่อ
        <div class="checkbox form-control form-control-sm">
          <label class="custom-control custom-checkbox">
            <input type="checkbox" class="custom-control-input" id="checkStep" onchange="checkboxChange()">
            <span class="custom-control-indicator"></span>
            <span class="custom-control-description">เลือกการทดลองที่จะทำ</span>
          </label>
          <div class="row">
            <div class="col">
              <div class="row">
                <div class="col">
                  <label class="custom-control custom-checkbox">
                    <input id="radio-state1" name="radio" type="checkbox" class="custom-control-input" disabled>
                    <span class="custom-control-indicator"></span>
                    <span class="custom-control-description">การตรวจหมู่เลือดเอบีโอ</span>
                  </label>
                  <label class="custom-control custom-checkbox">
                    <input id="radio-state2" name="radio" type="checkbox" class="custom-control-input" disabled>
                    <span class="custom-control-indicator"></span>
                    <span class="custom-control-description">การตรวจกรองแอนติบอดี</span>
                  </label>
                  <label class="custom-control custom-checkbox">
                    <input id="radio-state3" name="radio" type="checkbox" class="custom-control-input" disabled>
                    <span class="custom-control-indicator"></span>
                    <span class="custom-control-description">การตรวจน้ำลาย</span>
                  </label>
                </div>
                <div class="col-4">
                  <label class="custom-control custom-checkbox">
                    <input id="radio-state4" name="radio" type="checkbox" class="custom-control-input" disabled>
                    <span class="custom-control-indicator"></span>
                    <span class="custom-control-description">เอบีโอ</span>
                  </label>
                  <label class="custom-control custom-checkbox">
                    <input id="radio-state5" name="radio" type="checkbox" class="custom-control-input" disabled>
                    <span class="custom-control-indicator"></span>
                    <span class="custom-control-description">FUT1</span>
                  </label>
                  <label class="custom-control custom-checkbox">
                    <input id="radio-state6" name="radio" type="checkbox" class="custom-control-input" disabled>
                    <span class="custom-control-indicator"></span>
                    <span class="custom-control-description">FUT2</span>
                  </label>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="col">
        ผลลัพธ์การทดลองฟีโนไทป์ : การตรวจหมู่เลือดเอบีโอ
        <div class="checkbox form-control form-control-sm">
          <div class="row">
            <div class="col">
              <label class="custom-control custom-checkbox">
                <input id="radio-serology1" name="serology" type="checkbox" class="custom-control-input">
                <span class="custom-control-indicator"></span>
                <span class="custom-control-description">A with unexpected alloantibody</span>
              </label>
              <label class="custom-control custom-checkbox">
                <input id="radio-serology2" name="serology" type="checkbox" class="custom-control-input">
                <span class="custom-control-indicator"></span>
                <span class="custom-control-description">B with unexpected alloantibody</span>
              </label>
              <label class="custom-control custom-checkbox">
                <input id="radio-serology3" name="serology" type="checkbox" class="custom-control-input">
                <span class="custom-control-indicator"></span>
                <span class="custom-control-description">AB with unexpected alloantibody</span>
              </label>
              <label class="custom-control custom-checkbox">
                <input id="radio-serology4" name="serology" type="checkbox" class="custom-control-input">
                <span class="custom-control-indicator"></span>
                <span class="custom-control-description">O with unexpected alloantibody</span>
              </label>
              <div class="row">
                <div class="col">
                  <label class="custom-control custom-checkbox">
                    <input id="radio-blood1" name="blood" type="checkbox" class="custom-control-input">
                    <span class="custom-control-indicator"></span>
                    <span class="custom-control-description">A</span>
                  </label>
                  <label class="custom-control custom-checkbox">
                    <input id="radio-blood2" name="blood" type="checkbox" class="custom-control-input">
                    <span class="custom-control-indicator"></span>
                    <span class="custom-control-description">B</span>
                  </label>
                  <label class="custom-control custom-checkbox">
                    <input id="radio-blood3" name="blood" type="checkbox" class="custom-control-input">
                    <span class="custom-control-indicator"></span>
                    <span class="custom-control-description">AB</span>
                  </label>
                  <label class="custom-control custom-checkbox">
                    <input id="radio-blood4" name="blood" type="checkbox" class="custom-control-input">
                    <span class="custom-control-indicator"></span>
                    <span class="custom-control-description">O</span>
                  </label>
                </div>
              </div>
            </div>
          </div>
        </div>
        ผลลัพธ์การทดลองฟีโนไทป์ : การตรวจกรองแอนติบอดี
        <div class="checkbox form-control form-control-sm">
          <div class="row">
            <div class="col">
              <label class="custom-control custom-checkbox">
                <input id="radio-screening1" name="screening" type="checkbox" class="custom-control-input">
                <span class="custom-control-indicator"></span>
                <span class="custom-control-description">พบ Alloantibody</span>
              </label>
              <label class="custom-control custom-checkbox">
                <input id="radio-screening2" name="screening" type="checkbox" class="custom-control-input">
                <span class="custom-control-indicator"></span>
                <span class="custom-control-description">ไม่พบ Alloantibody</span>
              </label>
            </div>
          </div>
        </div>
        ผลลัพธ์การทดลองฟีโนไทป์ : การตรวจน้ำลาย
        <div class="checkbox form-control form-control-sm">
          <div class="row">
            <div class="col">
              <label class="custom-control custom-checkbox">
                <input id="radio-hemagglutination1" name="hemagglutination" type="checkbox" class="custom-control-input">
                <span class="custom-control-indicator"></span>
                <span class="custom-control-description">Secretor,gr.A</span>
              </label>
              <label class="custom-control custom-checkbox">
                <input id="radio-hemagglutination2" name="hemagglutination" type="checkbox" class="custom-control-input">
                <span class="custom-control-indicator"></span>
                <span class="custom-control-description">Secretor,gr.B</span>
              </label>
              <label class="custom-control custom-checkbox">
                <input id="radio-hemagglutination3" name="hemagglutination" type="checkbox" class="custom-control-input">
                <span class="custom-control-indicator"></span>
                <span class="custom-control-description">Secretor,gr.AB</span>
              </label>
              <label class="custom-control custom-checkbox">
                <input id="radio-hemagglutination4" name="hemagglutination" type="checkbox" class="custom-control-input">
                <span class="custom-control-indicator"></span>
                <span class="custom-control-description">Secretor,gr.O</span>
              </label>
              <label class="custom-control custom-checkbox">
                <input id="radio-hemagglutination5" name="hemagglutination" type="checkbox" class="custom-control-input">
                <span class="custom-control-indicator"></span>
                <span class="custom-control-description">Non-Secretor</span>
              </label>
            </div>
          </div>
        </div>
      </div>
      <div class="col">
        <div class="row">
          <div class="col">
            <label class="custom-control custom-checkbox">
              <input id="selectAll" name="radio" type="checkbox" class="custom-control-input" onchange="checkSelectAll();">
              <span class="custom-control-indicator"></span>
              <span class="custom-control-description">เลือกทั้งหมด</span>
            </label>
          </div>
        </div>
        ผลลัพธ์การทดลองจีโนไทป์ : เอบีโอ
        <div class="checkbox form-control form-control-sm">
          <div class="row">
            <div class="col">
              <label class="custom-control custom-checkbox">
                <input id="radio-abo1" name="hemagglutination" type="checkbox" class="custom-control-input">
                <span class="custom-control-indicator"></span>
                <span class="custom-control-description">AA or AO</span>
              </label>
              <label class="custom-control custom-checkbox">
                <input id="radio-abo2" name="hemagglutination" type="checkbox" class="custom-control-input">
                <span class="custom-control-indicator"></span>
                <span class="custom-control-description">BB or BO</span>
              </label>
              <label class="custom-control custom-checkbox">
                <input id="radio-abo3" name="hemagglutination" type="checkbox" class="custom-control-input">
                <span class="custom-control-indicator"></span>
                <span class="custom-control-description">OO</span>
              </label>
            </div>
          </div>
        </div>
        ผลลัพธ์การทดลองจีโนไทป์ : FUT1
        <div class="checkbox form-control form-control-sm">
          <div class="row">
            <div class="col">
              <label class="custom-control custom-checkbox">
                <input id="fut11" name="hemagglutination" type="checkbox" class="custom-control-input">
                <span class="custom-control-indicator"></span>
                <span class="custom-control-description">424C>T</span>
              </label>
              <label class="custom-control custom-checkbox">
                <input id="fut12" name="hemagglutination" type="checkbox" class="custom-control-input">
                <span class="custom-control-indicator"></span>
                <span class="custom-control-description">328G>A</span>
              </label>
              <label class="custom-control custom-checkbox">
                <input id="fut13" name="hemagglutination" type="checkbox" class="custom-control-input">
                <span class="custom-control-indicator"></span>
                <span class="custom-control-description">658C>T</span>
              </label>
              <label class="custom-control custom-checkbox">
                <input id="fut14" name="hemagglutination" type="checkbox" class="custom-control-input">
                <span class="custom-control-indicator"></span>
                <span class="custom-control-description">328G>A</span>
              </label>
              <label class="custom-control custom-checkbox">
                <input id="fut15" name="hemagglutination" type="checkbox" class="custom-control-input">
                <span class="custom-control-indicator"></span>
                <span class="custom-control-description">35C>T</span>
              </label>
              <label class="custom-control custom-checkbox">
                <input id="fut16" name="hemagglutination" type="checkbox" class="custom-control-input">
                <span class="custom-control-indicator"></span>
                <span class="custom-control-description">อื่นๆ</span>
              </label>
            </div>
          </div>
        </div>
        ผลลัพธ์การทดลองจีโนไทป์ : FUT2
        <div class="checkbox form-control form-control-sm">
          <div class="row">
            <div class="col">
              <label class="custom-control custom-checkbox">
                <input id="fut21" name="hemagglutination" type="checkbox" class="custom-control-input">
                <span class="custom-control-indicator"></span>
                <span class="custom-control-description">357C>T</span>
              </label>
              <label class="custom-control custom-checkbox">
                <input id="fut22" name="hemagglutination" type="checkbox" class="custom-control-input">
                <span class="custom-control-indicator"></span>
                <span class="custom-control-description">385A>T</span>
              </label>
              <label class="custom-control custom-checkbox">
                <input id="fut23" name="hemagglutination" type="checkbox" class="custom-control-input">
                <span class="custom-control-indicator"></span>
                <span class="custom-control-description">101T>G</span>
              </label>
              <label class="custom-control custom-checkbox">
                <input id="fut24" name="hemagglutination" type="checkbox" class="custom-control-input">
                <span class="custom-control-indicator"></span>
                <span class="custom-control-description">อื่นๆ</span>
              </label>
            </div>
          </div>
        </div>

      </div>
    </div>
    <br>
    <div class="row">
      <div class="col text-center">
        <button type="submit" class="btn btn-sm btn-outline-primary">ค้นหา</button>
      </div>
    </div>
  </form>
  <br>

  <div *ngIf="isFound; else notFound">
    <table id="tempTable" class="table table-sm table-striped table-bordered table-hover">
      <thead class="thead-table">
        <tr>
          <th colspan="3" border="1">ประวัติ</th>
          <th colspan="3" border="1">ฟีโนไทป์</th>
          <th colspan="3" border="1">จีโนไทป์</th>
          <th rowspan="2" style="text-align:center; vertical-align:middle; ">สรุปหมู่เลือด</th>
          <th rowspan="2" style="text-align:center; vertical-align:middle; ">ทำการทดลองต่อ</th>
          <th rowspan="2" style="text-align:center; vertical-align:middle; ">รายละเอียด</th>
          <th rowspan="2" style="text-align:center; vertical-align:middle; ">ลบ</th>
        </tr>
        <tr>
          <th>รหัสบัตรประชาชน</th>
          <th>ชื่อจริง</th>
          <th>นามสกุล</th>
          <th>เอบีโอ</th>
          <th>แอนติบอดี</th>
          <th>น้ำลาย</th>
          <th>เอบีโอ</th>
          <th>FUT1</th>
          <th>FUT2</th>

        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let patient of patients;">
          <td>{{patient.id}}</td>
          <td>{{patient.fName}}</td>
          <td>{{patient.lName}}</td>
          <td>-</td>
          <td>-</td>
          <td>-</td>
          <td>-</td>
          <td>-</td>
          <td>-</td>
          <td class="text-green">Group O</td>
          <td class="text-green">
            <button (click)="phenotype(patient.id)" class="btn btn-sm btn-outline-warning">ฟีโนไทป์:เอบีโอ</button>
          </td>
          <td class="text-green">
            <button (click)="viewDetail(patient.id)" class="btn btn-sm btn-outline-primary">รายละเอียด</button>
          </td>
          <td>
            <button (click)="deletePatient(patient.id)" class="btn btn-sm btn-outline-danger">ลบ</button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>


  <ng-template #notFound>
    <div class="alert alert-warning container" role="alert" style="text-align:center;">
      <h4 class="alert-heading">ไม่พบข้อมูลคนไข้ดังกล่าว</h4>
      <hr>
      <p>สร้างรายชื่อคนไข้ใหม่</p>
      <button type="submit" routerLink="create" class="btn btn-sm btn-info">เพิ่มคนไข้ใหม่</button>
    </div>
  </ng-template>

</div>